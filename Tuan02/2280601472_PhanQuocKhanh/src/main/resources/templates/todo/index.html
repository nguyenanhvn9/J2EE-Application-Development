<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>todos</title>
    <style>
      body {
        background: #f5f5f5;
        font-family: "Segoe UI", Arial, sans-serif;
      }
      .todoapp {
        background: #fff;
        margin: 40px auto;
        width: 420px;
        border-radius: 12px;
        box-shadow: 0 4px 24px #b3b3b3;
        padding: 36px 36px 20px 36px;
      }
      h1 {
        color: #b83f45;
        text-align: center;
        font-size: 3.2rem;
        font-weight: 400;
        margin-bottom: 28px;
        letter-spacing: 2px;
      }
      form.add-form {
        display: flex;
        gap: 10px;
        margin-bottom: 18px;
      }
      form.add-form input[type="text"] {
        flex: 1;
        padding: 12px;
        border: 2px solid #b83f45;
        border-radius: 6px;
        font-size: 1.15rem;
        outline: none;
        transition: border 0.2s;
      }
      form.add-form input[type="text"]:focus {
        border: 2px solid #a12c2c;
      }
      form.add-form button {
        background: #b83f45;
        color: #fff;
        border: none;
        border-radius: 6px;
        padding: 0 22px;
        font-size: 1.15rem;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s;
        box-shadow: 0 2px 8px #e6b3b3;
      }
      form.add-form button:hover {
        background: #a12c2c;
      }
      ul.todo-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      ul.todo-list li {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
        font-size: 1.15rem;
      }
      ul.todo-list li:last-child {
        border-bottom: none;
      }
      .toggle-form {
        margin: 0 12px 0 0;
      }
      .toggle-form input[type="checkbox"] {
        width: 22px;
        height: 22px;
        accent-color: #b83f45;
        cursor: pointer;
      }
      .todo-title.completed {
        text-decoration: line-through;
        color: #bfbfbf;
      }
      .delete-form {
        margin-left: auto;
      }
      .delete-form button {
        background: none;
        border: none;
        color: #b83f45;
        font-size: 1.3rem;
        cursor: pointer;
        padding: 4px 10px;
        border-radius: 4px;
        transition: background 0.2s;
      }
      .delete-form button:hover {
        background: #fbeaea;
        color: #a12c2c;
      }
      .footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 22px;
        font-size: 1.05rem;
        color: #888;
      }
      .filters {
        display: flex;
        gap: 8px;
      }
      .filters form {
        display: inline;
      }
      .filters button {
        background: none;
        border: 1.5px solid #b83f45;
        color: #b83f45;
        border-radius: 4px;
        padding: 2px 12px;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
      }
      .filters button.selected,
      .filters button:focus {
        background: #b83f45;
        color: #fff;
      }
      .clear-completed-form button {
        background: none;
        border: none;
        color: #b83f45;
        font-size: 1rem;
        cursor: pointer;
        text-decoration: underline;
      }
      .clear-completed-form button:hover {
        color: #a12c2c;
      }
    </style>
  </head>
  <body>
    <div class="todoapp">
      <h1>todos</h1>
      <form
        class="add-form"
        th:action="@{/todos/add}"
        method="post"
        th:object="${newTodo}"
      >
        <input
          type="text"
          th:field="*{title}"
          placeholder="What needs to be done?"
          autocomplete="off"
        />
        <button type="submit">Thêm</button>
      </form>
      <ul class="todo-list">
        <li th:each="todo : ${todos}">
          <form
            class="toggle-form"
            th:action="@{'/todos/' + ${todo.id} + '/toggle'}"
            method="post"
            th:with="filter=${filter}"
          >
            <input
              type="checkbox"
              name="completed"
              th:checked="${todo.completed}"
              onclick="this.form.submit()"
            />
            <input type="hidden" name="filter" th:value="${filter}" />
          </form>
          <span
            th:text="${todo.title}"
            th:classappend="${todo.completed} ? 'todo-title completed' : 'todo-title'"
          ></span>
          <form
            class="delete-form"
            th:action="@{'/todos/' + ${todo.id} + '/delete'}"
            method="post"
            th:with="filter=${filter}"
          >
            <input type="hidden" name="filter" th:value="${filter}" />
            <button title="Xóa">×</button>
          </form>
        </li>
      </ul>
      <div class="footer">
        <span th:text="${activeCount} + ' items left'"></span>
        <div class="filters">
          <form th:action="@{/todos}" method="get">
            <button
              type="submit"
              th:classappend="${filter} == 'all' ? 'selected' : ''"
            >
              All
            </button>
          </form>
          <form th:action="@{/todos}" method="get">
            <input type="hidden" name="filter" value="active" /><button
              type="submit"
              th:classappend="${filter} == 'active' ? 'selected' : ''"
            >
              Active
            </button>
          </form>
          <form th:action="@{/todos}" method="get">
            <input type="hidden" name="filter" value="completed" /><button
              type="submit"
              th:classappend="${filter} == 'completed' ? 'selected' : ''"
            >
              Completed
            </button>
          </form>
        </div>
        <form
          class="clear-completed-form"
          th:action="@{/todos/clear-completed}"
          method="post"
        >
          <button type="submit">Clear completed</button>
        </form>
      </div>
    </div>
  </body>
</html>
