<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Quản lý sách</title>
  <meta charset="UTF-8">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">
<h2 class="mb-4">Quản lý sách</h2>
<div class="mb-4">
  <a href="/" class="btn btn-secondary">Về trang chủ</a>
</div>
<!-- Thông báo -->
<div th:if="${msg}" class="alert alert-info" th:text="${msg}"></div>

<!-- Form thêm/sửa sách -->
<form th:action="@{/books}" method="post" th:object="${book}" class="row g-3 mb-4">
  <input type="hidden" th:field="*{id}" />

  <div class="col-md-5">
    <label class="form-label">Tiêu đề:</label>
    <input type="text" th:field="*{title}" class="form-control" required />
  </div>

  <div class="col-md-5">
    <label class="form-label">Tác giả:</label>
    <input type="text" th:field="*{author}" class="form-control" required />
  </div>

  <div class="col-md-2 d-flex align-items-end">
    <button type="submit" class="btn btn-primary w-100">Lưu</button>
  </div>
</form>

<!-- Danh sách sách -->
<table class="table table-bordered table-hover">
  <thead class="table-light">
  <tr>
    <th>ID</th>
    <th>Tiêu đề</th>
    <th>Tác giả</th>
    <th>Hành động</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="book : ${books}">
    <td th:text="${book.id}"></td>
    <td th:text="${book.title}"></td>
    <td th:text="${book.author}"></td>
    <td>
      <a th:href="@{/books/edit/{id}(id=${book.id})}" class="btn btn-sm btn-warning">Sửa</a>
      <form th:action="@{/books/delete/{id}(id=${book.id})}" method="post" class="d-inline">
        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Bạn có chắc muốn xoá?')">Xoá</button>
      </form>
    </td>
  </tr>
  </tbody>
</table>

<!-- Phân trang -->
<div class="mt-3">
  <span>Trang: </span>
  <span th:each="i : ${#numbers.sequence(0, totalPages - 1)}">
    <a th:href="@{/books(page=${i},size=${size})}"
       th:text="${i + 1}"
       class="btn btn-sm"
       th:classappend="${i == currentPage} ? 'btn-primary' : 'btn-outline-secondary'">1</a>
  </span>
</div>

<!-- Bootstrap JS (tùy chọn) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
